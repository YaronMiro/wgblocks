# Understanding The Block Skeleton Directory Structure
- - - -

The [Example Block](https://bitbucket.org/webpals/gutenberg-example-block) skeleton repo has a dedicated structure of directories and files - This structure is considered to be the best practice.    

**Note**: It is NOT recommended to change it, however it is flexible and can be altered or extended upon a given need, but will require more boilerplate code to set it up then the default one.


### Directory Full Schema
- - - -

```bash
ExampleBlock/
├── dist/
│   ├── editor.asset.php
│   ├── editor.css
│   ├── editor.js
│   ├── script.asset.php
│   ├── script.js
│   ├── style.css
├── inc/
│   ├── edit.js
│   └── save.js
└── style/
    ├── editor.scss
    ├── style.scss
├── Block.php
├── editor.js
├── script.js
├── block.webpack.config.js
```


### Directories Review
- - - -

This section will review the directories and their associated files.

### Root

The `./ExampleBlock` is the _root_ directory that holds all the block directories and their associated files, It must be placed under the plugin `./blocks/` directory.  

The block directory name is unique in nature (we cannot have directories with the exact name (case-sensitive) under the same folder), this mean we can leverage that to define:   

* Unique namespace for the `Block::class`.   

* Unique name for the block itself.   

We are implementing the [PSR-4](https://www.php-fig.org/psr/psr-4/#3-examples) standard (class auto-loading using namespace), therefore we are using the _PascalCase_ for the directory name and also for the unique part of the namespace.   


##### Understanding the block registration process.
Lets understand what happens behind the scenes when registering the block:    

`Blocks\BootstrapBlocks::class`  

* Track all the existing blocks directories (by targeting the `Block.php` file under each _block directory_).
* Creating the _block unique name_ by using the _directory name_ and formatting it from _PascalCase_ to _kebab-case_ - WordPress expects this format when registering a block.
* Passing the _block unique name_ and _block directory_path_ to each `Block::class` constructor, instantiating it by its unique namespace and calling the `registerBlockType()` _method_.

`Blocks\AbstractBlock::class`   

* Registers each block under its unique name, the name is constructed out of 2 parts. The first is a default prefix of `wg-blocks/` followed by the `block-name`. 
* Registers block attributes, assets and their dependencies.   

These classes are highly documented and, take care of all the boilerplate code and logic when registering a dynamic block, this way the process of creating a block is intuitive and demands just a few steps.

### 
Let's look at an example in practical, if we have 2 blocks each on must be unique:

```bash
# Directory.
./blocks/ExampleBlock/*

# Namespace, The actual Block class name.
Webpals\WgBlocks\Blocks\ExampleBlock\Block;

# Block name.
wg-blocks/example-block
```

###### 

```bash
# Directory.
./blocks/MyBlock/*

# Namespace, The actual Block class name.
Webpals\WgBlocks\Blocks\MyBlock\Block;

# Block name.
wg-blocks/my-block

```

## 
### ./dist
- - - -

The directory holds all the bundled assets files of the block, these assets are generated by Webpack build process.

All files are generated by the entry-points and output path of `block.webpack.config.js`., for more info about this file see [here](./#markdown-header-blockwebpackconfigjs)

### 
#### editor.js 
The generated file of `./editor.js`

### 
#### editor.css
The generated file of `./style/editor.scss`


### 
#### script.js
The generated file of `./script.js`

### 
#### style.css
The generated file of `./style/script.scss`


### 
#### editor.asset.php 
Holds the dependencies list for the `./editor.js` file.   

The dependency extraction is managed automatically for the _editor.js_ file, See more info in _docs_ - [handling JS dependencies](./wordpress-node-packages.md).
   

### 
#### script.asset.php 
Holds the dependencies list for the `./script.js` file.   

The dependency extraction is managed automatically for the _script.js_ file, See more info in _docs_ - [handling JS dependencies](./wordpress-node-packages.md).


## 
### ./inc
- - - -

The directory hold the files for the components that structures the block, It has 2 default components, they are required when registering the block.   

The components of the skelton are build as _Functional Components_ and should be used with _HOOKS_, this is considered to be the best practice when using _React,   
but you are also able to implement _Class Components_ and it will continue to work as expected, although it is not recommended.

### 
#### edit.js
Declares the _edit component_ of the block, this component is responsible for the block behavior and visual on Gutenberg editor admin UI. 
     

### 
#### save.js
Declares the _save component_ of the block, this component is responsible for the block visual on the front page, since this is a dynamic block (it uses server-side render),   
then this components will most likely return `null` or the `innerBlock.content` component.


 
## 
### ./style
- - - -

The directory holds all the styling files of the block, It has 2 default SCSS files.

### 
#### editor.scss 
Defines the styling of the block on the Gutenberg editor admin UI and, It is been imported by `./editor.js` file.  
     
### 
#### style.scss
Defines the styling of the block on the front page and, It is been imported by `./script.js` file. 
 


## 
## Files Review
- - - -

This section will review the individual files under the block _root_ directory.


# 
#### Block.php
This is the main block file, it declares the `Block::class` under the block unique namespace and extends `Blocks\AbstractBlock::class`.   

**Note**:

* The file name MUST NOT be changed, since the `Blocks\BootstrapBlocks::class` track and load a block by targeting its _Block.php_ file.

* The _class_ `Block` declared on this file MUST NOT be changed as well, since we are using [PSR-4](https://www.php-fig.org/psr/psr-4/#3-examples) standard to load this class.    

#### 
There are 2 methods that this class is obliged to declare:   

* `setAttributes()` _method_, it defines the block attributes.    

* `render( $attributes, $content )` _method_, it defines the block render on the front page, should return HTML or a HTML in a string format.

See more info about the `Block::class` in _docs_ - [The block class functionality and configuration](./the-block-class-functionality-and-configuration.md).


# 
#### editor.js
Contains the block registration code and configuration it needs for the Gutenberg block, see more on the official Gutenberg docs about [block registration](https://developer.wordpress.org/block-editor/developers/block-api/).


# 
#### script.js
Contains any JS code required when the block loads on the front page.


# 
#### block.webpack.config.js
- - - -
Webpack build process is combination of 2 config files `webpack.config.js` ( _default_ ) and the `block.webpack.config.js` ( _extend_ ).   

The _default_ config holds the common configuration for generating the assets, it is also responsible for tracking all the existing blocks configs (_extend_) and generating their respected assets as well.    

The _extend_ config (block) declares the `entry-points` and the `output path` for the block assets.    

entry-points:   

* editor - This will generate the following files `editor.js`, `editor.css`, `editor.asset.php`.

* script - This will generate the following files `script.js`, `style.css`, `script.asset.php`.    

output path:

* This will create the `./dist` under each block directory (separately)

**Note:** The _extend_ config also enables the flexibility to override or extend the _default_ config definitions, See more info in _docs_ - [Webpack usage on this plugin](./webpack-usage.md.
 
