# Building Assets (JS, CSS) Using Webpack
- - - -

Webpack is a static module bundler for JavaScript applications, it takes all the code from your application and makes it usable in a web browser.   

Modules are reusable chunks of code built from your appâ€™s _JavaScript_, _node_modules_, _images_, and the _SCSS_ styles which are packaged to be easily used in your website. 

#### Webpack Build Operations:   
* Compiling `SCSS` into `CSS` including the source map file.
* Transpiling `ES6` to `ES5` including the source map file.
* Compiling `React` and `JSX`, See more info _docs_ - [using React within WordPress](./how-to-use-react-with-wp.md).
* Dependency Extraction of WordPress npm packages and global scripts, See more info _docs_ - [handling WordPress dependencies](./wordpress-node-packages.md).
* Validating with `EsLint` while generating the assets.


#### Webpack Config Structure:   
The default configuration file for webpack is `webpack.config.js` and, can be found under plugin _root_ directory.   

This config has a slightly different structure then usual, If you inspect it you will find that it does not define any _entry-points_ and has no _output path_.   
The concept behind this implementation is that it will only hold the common configuration on how to generate and bundle an asset type ( _js_, _css_, etc... ).   
The configuration part of what asset to bundle ( _entry-point_ ) and where to output the generated asset ( _output path_ ) is defined on a separate _extended_config_ file.   

This technique has a couple of advantages:    

* Ability define _groups_, were each _group_ has its own dedicated set of _entry-points_ and _output path_. 

* Flexibility to extend or override the _default_config_ in case we need a different configuration for a specific assets.  

The block assets are been generated by this technique and each block directory has its own webpack config file by the name of `block.webpack.config.js` which extends the _webpack.config.js_ configuration.   

This way each block directory holds its own `./dist/*` directory with the block unique assets.  


#### Extending Webpack Config:   
In the case there is a need to generate new asset:   

* Implement the _extend_ technique by creating a dedicated Webpack _extended config_ file of your own that holds the _entry-point_ and the _output path_.   

* Update the default _webpack.config.js_ file and, require the _extended config_ (see the implementation of how block extends), this way you won't break the existing config structure.  



## 
### Setting Webpack Build Mode  
- - - -
There are 2 modes available:   

* `development`   
* `production`

mode can be set by setting the value of `ENVIRONMENT_TYPE` on the `.env.` file, which is located in the _root_ directory.

```bash
ENVIRONMENT_TYPE="development"
```  

**Note**: any other value then _development_ is considered as _production_.

## 
### Setting Webpack Aliases  
- - - -

You can add as many as needed, these are the default ones:  

* `@Components` - refers to the `./common/components/` directory.

* `@Hooks` - refers to the `./common/hooks/` directory.

THen you can use it on any `Javascript` file, For example:
```js
import { useCustomHook } from '@Hooks/custom-hooks';
import { CustomButton } from '@Components/custom-components';
```

See more info about [Webpack Aliases](https://webpack.js.org/configuration/resolve/#resolvealias).


## 
### Building Assets
- - - -
Run the command from the plugin _root_ directory.

Build with watch mode:    

`npm run start`    

Build Once:    

`npm run build`




